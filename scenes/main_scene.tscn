[gd_scene load_steps=14 format=3 uid="uid://ftu7pwhic3e0"]

[ext_resource type="ArrayMesh" uid="uid://cx3ifjn71vfva" path="res://models/cube.obj" id="1_b3wd0"]
[ext_resource type="ArrayMesh" uid="uid://dlhsjbeirjpup" path="res://models/plane.obj" id="1_d6f2s"]
[ext_resource type="Script" path="res://scripts/main_scene.gd" id="1_jk80a"]
[ext_resource type="Material" path="res://materials/simple_blue.tres" id="2_5tyck"]
[ext_resource type="Script" path="res://scripts/tile.gd" id="2_dce16"]
[ext_resource type="Script" path="res://scripts/game_manager.gd" id="2_g8jo3"]
[ext_resource type="Material" uid="uid://cea11se2jmcfh" path="res://materials/simple_black.tres" id="2_j5vto"]
[ext_resource type="Script" path="res://scripts/control.gd" id="2_o48t3"]
[ext_resource type="PackedScene" uid="uid://4gae5wuvsg0f" path="res://prefabs/enemies/enemy.tscn" id="3_j385m"]
[ext_resource type="PackedScene" uid="uid://bn5p6wefqllmy" path="res://prefabs/attack_command.tscn" id="3_yriip"]
[ext_resource type="Script" path="res://scripts/board.gd" id="5_m5hlm"]

[sub_resource type="BoxShape3D" id="BoxShape3D_qu3yu"]
size = Vector3(1, 0.133667, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_i1wnd"]

[node name="main_scene" type="Node3D"]
script = ExtResource("1_jk80a")

[node name="game_manager" type="Node3D" parent="."]
script = ExtResource("2_g8jo3")
_enemy_prefab = ExtResource("3_j385m")

[node name="control" type="Node3D" parent="."]
script = ExtResource("2_o48t3")
_command_prefab = ExtResource("3_yriip")

[node name="camera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.722967, 0.690882, 0, -0.690882, 0.722967, 2, 9.97057, 13.2735)
fov = 20.0

[node name="board" type="Node3D" parent="."]
script = ExtResource("5_m5hlm")

[node name="entities" type="Node3D" parent="board"]

[node name="visual_effects" type="Node3D" parent="board"]

[node name="tilemap" type="Node3D" parent="board"]

[node name="tile" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 0)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile2" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 0)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile2"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile3" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 0)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile3"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile4" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile4"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile5" type="StaticBody3D" parent="board/tilemap"]
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile5"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile6" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 1)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile6"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile6"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile7" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 1)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile7"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile7"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile8" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 1)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile8"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile8"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile9" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile9"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile9"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile10" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile10"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile10"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile11" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 2)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile11"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile11"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile12" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 2)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile12"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile12"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile13" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 2)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile13"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile13"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile14" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 2)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile14"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile14"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile15" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile15"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile15"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile16" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 3)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile16"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile16"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile17" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 3)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile17"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile17"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile18" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 3)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile18"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile18"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile19" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 3)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile19"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile19"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile20" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile20"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile20"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile21" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 4)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile21"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile21"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile22" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 4)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile22"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile22"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile23" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 4)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile23"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile23"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile24" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 4)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile24"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile24"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="tile25" type="StaticBody3D" parent="board/tilemap"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 4)
script = ExtResource("2_dce16")

[node name="mesh" type="MeshInstance3D" parent="board/tilemap/tile25"]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)
mesh = ExtResource("1_d6f2s")
surface_material_override/0 = ExtResource("2_5tyck")

[node name="collider" type="CollisionShape3D" parent="board/tilemap/tile25"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.05, 0)
shape = SubResource("BoxShape3D_qu3yu")

[node name="static_world" type="Node3D" parent="."]

[node name="ground" type="StaticBody3D" parent="static_world"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.2, 0)
axis_lock_linear_x = true
axis_lock_linear_y = true
axis_lock_linear_z = true
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true

[node name="collider" type="CollisionShape3D" parent="static_world/ground"]
transform = Transform3D(100, 0, 0, 0, 100, 0, 0, 0, 100, 0, -50, 0)
shape = SubResource("BoxShape3D_i1wnd")

[node name="mesh" type="MeshInstance3D" parent="static_world/ground"]
transform = Transform3D(100, 0, 0, 0, 1, 0, 0, 0, 100, 0, -1, 0)
mesh = ExtResource("1_b3wd0")
skeleton = NodePath("../../..")
surface_material_override/0 = ExtResource("2_j5vto")

[node name="light" type="Node3D" parent="static_world"]

[node name="directonal_light" type="DirectionalLight3D" parent="static_world/light"]
transform = Transform3D(0.753024, -0.41596, 0.509836, 1.5628e-08, 0.774834, 0.632165, -0.657993, -0.476035, 0.583469, 5.68445, 1.28105, 4.20563)
